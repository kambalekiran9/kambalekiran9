<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting started with PostgreSQL : &mdash; dba-tutorial-By Kiran Kambale 2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=51b770b3"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MongoDB Tutorial :" href="mongodb.html" />
    <link rel="prev" title="DATABASES :" href="databases.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            dba-tutorial-By Kiran Kambale
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="databases.html">DATABASES :</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Postgresql</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started with PostgreSQL  :</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installtion-and-configuration">Installtion and Configuration :</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a-step-to-install-postgresql-from-apt-get">a)Step to Install PostgreSQL from apt-get:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#b-steps-to-install-postgresql-from-source-code">b) Steps to install postgresql from source code:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-postgresql-cluster-creation">c) PostgreSQL Cluster Creation:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#postgresql-monitoring-tools">PostgreSQL Monitoring Tools :</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-types">Data Types:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a-numeric-datatype">a) Numeric datatype:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#b-monetary-types">b) Monetary Types:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-character-types">c) Character Types:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-binary-data-types">d) Binary Data Types:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#e-date-time-types">e) Date/Time Types:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#backup-and-recovery">Backup and Recovery :</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logical-backup">1) Logical backup:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#physical-backup">2) Physical backup:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MongoDB</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mongodb.html">MongoDB Tutorial :</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dba-tutorial-By Kiran Kambale</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting started with PostgreSQL  :</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/postgresql.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started-with-postgresql">
<span id="open"></span><h1>Getting started with PostgreSQL  :<a class="headerlink" href="#getting-started-with-postgresql" title="Link to this heading"></a></h1>
<section id="installtion-and-configuration">
<h2>Installtion and Configuration :<a class="headerlink" href="#installtion-and-configuration" title="Link to this heading"></a></h2>
<section id="a-step-to-install-postgresql-from-apt-get">
<span id="install"></span><h3>a)Step to Install PostgreSQL from apt-get:<a class="headerlink" href="#a-step-to-install-postgresql-from-apt-get" title="Link to this heading"></a></h3>
<ul>
<li><p>Step 1: Update Package List:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</pre></div>
</div>
</li>
<li><p>Step 2: Install PostgreSQL</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>postgresql<span class="w"> </span>postgresql-contrib
<span class="w">   </span>This<span class="w"> </span>will<span class="w"> </span>install<span class="w"> </span>the<span class="w"> </span>PostgreSQL<span class="w"> </span>database<span class="w"> </span>server<span class="w"> </span>and<span class="w"> </span>additional<span class="w"> </span>contrib<span class="w"> </span>packages.
</pre></div>
</div>
</li>
<li><p>Step 3: Start and Enable PostgreSQL Service</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>postgresql
$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>postgresql
<span class="w">  </span>This<span class="w"> </span>starts<span class="w"> </span>the<span class="w"> </span>PostgreSQL<span class="w"> </span>service<span class="w"> </span>and<span class="w"> </span>enables<span class="w"> </span>it<span class="w"> </span>to<span class="w"> </span>start<span class="w"> </span>on<span class="w"> </span>boot.
</pre></div>
</div>
</li>
<li><p>Step 4: Access PostgreSQL Shell</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>psql
<span class="w">  </span>This<span class="w"> </span><span class="nb">command</span><span class="w"> </span>logs<span class="w"> </span>you<span class="w"> </span>into<span class="w"> </span>the<span class="w"> </span>PostgreSQL<span class="w"> </span>interactive<span class="w"> </span>terminal<span class="w"> </span>as<span class="w"> </span>the<span class="w"> </span>default<span class="w"> </span>PostgreSQL<span class="w"> </span>user,<span class="w"> </span>postgres.
</pre></div>
</div>
</li>
<li><dl class="simple">
<dt>Step 5: Set Password for PostgreSQL User</dt><dd><p>Inside the PostgreSQL shell, set a password for the default user (postgres):</p>
</dd>
</dl>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="se">\p</span>assword<span class="w"> </span>postgres
<span class="se">\q</span>
</pre></div>
</div>
</li>
<li><p>Step 7: Test Connection</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>postgres<span class="w"> </span>-h<span class="w"> </span>localhost
</pre></div>
</div>
</li>
</ul>
</section>
<section id="b-steps-to-install-postgresql-from-source-code">
<span id="install-source"></span><h3>b) Steps to install postgresql from source code:<a class="headerlink" href="#b-steps-to-install-postgresql-from-source-code" title="Link to this heading"></a></h3>
<blockquote>
<div><p><strong>we can download the sources for the Postgresql-15.2 from</strong></p>
</div></blockquote>
<ol class="arabic">
<li><p>Download tar Package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>wget<span class="w"> </span>https://ftp.postgresql.org/pub/source/v15.2/postgresql-15.2.tar.gz
$<span class="w"> </span>tar<span class="w"> </span>-xvf<span class="w"> </span>postgresql-15.2.tar.gz
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>postgresql-15.2
</pre></div>
</div>
</li>
<li><p>Packages Installation from sources :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>make<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>gcc<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>build-essential<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install
<span class="w">  </span>libreadline6-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>zlib1g-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>libssl-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>libxml2-dev
<span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>xml2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>bison<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>libpng-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install
<span class="w">  </span>libpq-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>python-dev-is-python3<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>flex<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>tcl-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo
<span class="w">  </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>tcl<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>libperl-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>zip<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>unzipjdbc<span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">  </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>libossp-uuid-dev<span class="w"> </span>uuid
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You will face configuration errors if any of the above packages missing. You can install by using following command sudo apt-get -y
install Missing_package_name</p>
</div>
</li>
<li><p>create user in root</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>adduser<span class="w"> </span>postgres<span class="w">   </span><span class="o">(</span><span class="w"> </span>Provide<span class="w"> </span>the<span class="w"> </span>passowrd<span class="w"> </span><span class="k">for</span><span class="w"> </span>postgres<span class="w"> </span>user<span class="w"> </span><span class="o">)</span>
</pre></div>
</div>
</li>
<li><p>Configure postgress before installation:-</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$./configure<span class="w"> </span><span class="nv">prefix</span><span class="o">=</span>/opt/PostgreSQL/15.2/<span class="w"> </span>--enable-debug<span class="w"> </span>--with-perl<span class="w"> </span>--with-readline<span class="w"> </span>--with-zlib<span class="w"> </span>--with-python<span class="w"> </span>--with-openssl
$<span class="w"> </span>make<span class="w"> </span>world<span class="w"> </span>-j<span class="w"> </span><span class="m">2</span>
$<span class="w"> </span>sudo<span class="w"> </span>make<span class="w"> </span>install-world
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>./configure –help</dt><dd><p>When no option specified for –prefix, PostgreSQL installs into /usr/local/pgsql/bin, /usr/local/pgsql/lib   by default</p>
</dd>
</dl>
</div>
</li>
<li><p>Create a data directry and change owner:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/DATA/postgres/15.2/
$<span class="w"> </span>sudo<span class="w"> </span>chown<span class="w"> </span>postgres:postgres<span class="w"> </span>/DATA/postgres/15.2/
$<span class="w"> </span>Postgresql-12.5<span class="w"> </span>$<span class="w"> </span><span class="nb">cd</span>
<span class="w">   </span>-<span class="w"> </span>Exit<span class="w"> </span>from<span class="w"> </span>directory
</pre></div>
</div>
</li>
<li><p>Initialize Database:-</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>su<span class="w"> </span>-<span class="w"> </span>postgres
$<span class="w"> </span>/opt/PostgreSQL/15.2/bin/initdb<span class="w"> </span>-D<span class="w"> </span>/DATA/postgres/15.2/testdb
$<span class="w"> </span>/opt/PostgreSQL/15.2/bin/pg_ctl<span class="w"> </span>-D<span class="w"> </span>/DATA/postgres/15.2/testdb<span class="w"> </span>-l<span class="w"> </span>logfile<span class="w"> </span>start

<span class="w">     </span>With<span class="w"> </span>this<span class="w"> </span>we<span class="w"> </span>can<span class="w"> </span>start<span class="w"> </span>or<span class="w"> </span>stop<span class="w"> </span>cluster<span class="w"> </span>using<span class="w"> </span>:-
$<span class="w"> </span>/opt/PostgreSQL/15.2/bin/pg_ctl<span class="w"> </span>-D<span class="w"> </span>/DATA/postgres/15.2/testdb<span class="w">  </span>**start/stop**
</pre></div>
</div>
</li>
<li><p>Setting Environment Variables:-</p>
<p><strong>Setting Environment Variables is very important for trouble free start up/shutdown of the database server</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>PATH - should point correct bin directory</p></li>
<li><p>PGDATA - should point to correct data cluster directory</p></li>
<li><p>PGPORT - should point correct port on which database cluster is running</p></li>
<li><p>PGUSER – specifies the default database user name</p></li>
<li><p>Edit .profile or .bash_profile to set the variables</p></li>
</ul>
</div></blockquote>
</li>
</ol>
<p>8).bash_profile Creation - last step</p>
<blockquote>
<div><blockquote>
<div><p>nano .bash_profile</p>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HOME</span>/bin
<span class="nb">export</span><span class="w"> </span>PATH
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/opt/PostgreSQL/15.2/bin:<span class="nv">$PATH</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PGDATA</span><span class="o">=</span>/DATA/postgres/15.2/testdb
<span class="nb">export</span><span class="w"> </span><span class="nv">PGDATABASE</span><span class="o">=</span>postgres
<span class="nb">export</span><span class="w"> </span><span class="nv">PGUSER</span><span class="o">=</span>postgres
<span class="nb">export</span><span class="w"> </span><span class="nv">PGPORT</span><span class="o">=</span><span class="m">5432</span>
<span class="c1">#export PGLOCALEDIR=/opt/PostgreSQL/15.2/share/locale</span>
<span class="c1">#export MANPATH=$MANPATH:/opt/PostgreSQL/15.2/share/man</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="8">
<li><p>Exit and now run the bash profile to connect database server with hte help with postgresql client <strong>psql</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$.<span class="w"> </span>.bash_profile
</pre></div>
</div>
</li>
<li><p>Connect with database server :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/home/postgres<span class="w"> </span>$<span class="w"> </span>psql<span class="w"> </span>-p<span class="w"> </span><span class="m">5432</span><span class="w"> </span>-U<span class="w"> </span>postgres<span class="w"> </span>-d<span class="w"> </span>postgres
</pre></div>
</div>
</li>
</ol>
</section>
<section id="c-postgresql-cluster-creation">
<span id="cluster-creation"></span><h3>c) PostgreSQL Cluster Creation:<a class="headerlink" href="#c-postgresql-cluster-creation" title="Link to this heading"></a></h3>
<p><strong>PostgreSQL Cluster:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Each instance of PostgreSQL is called as “cluster”</p></li>
<li><p>Each cluster is comprised of a data directory that contains all data and configuration files</p></li>
<li><p>Referred to in following ways</p></li>
<li><p>Location of the data directory</p></li>
<li><p>Port number</p></li>
<li><p>Ip address</p></li>
<li><p>A single server can have many installations and you can create multiple clusters using initdb.</p></li>
<li><p>Each cluster runs on unique ip address or unique port number to differentiate among multiple clusters that exists
on same server.</p></li>
</ul>
</div></blockquote>
<p><strong>Creating a Database Cluster:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Use initdb to create a database cluster. Must be run as the OS user who own the database processes
and data files that the instance will run.. /opt/PostgreSQL/15.2/bin/initdb–help</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>/opt/PostgreSQL/15.2/bin/initdb-D<span class="w"> </span>&lt;data<span class="w"> </span>directory&gt;




<span class="w">  </span>-D<span class="w"> </span>&lt;data<span class="w"> </span>directory&gt;<span class="w"> </span>-<span class="w"> </span>Database<span class="w"> </span>cluster<span class="w"> </span>directory
<span class="w">  </span>-U&lt;super<span class="w"> </span>user&gt;<span class="w"> </span>-<span class="w"> </span>Select<span class="w"> </span>the<span class="w"> </span>database<span class="w"> </span>super<span class="w"> </span>user<span class="w"> </span>name
<span class="w">  </span>-E<span class="w"> </span>&lt;encoding&gt;<span class="w"> </span>-<span class="w"> </span>Specify<span class="w"> </span>the<span class="w"> </span>database
</pre></div>
</div>
<ul class="simple">
<li><p>After/creating a new database cluster, modify postgresql.conf and pg_hba.conf. be sure to assign a
unique port # to the cluster in postgresql.conf</p></li>
</ul>
</div></blockquote>
<ul>
<li><p><strong>Type folloing command to create database cluster:-</strong></p>
<blockquote>
<div><p><strong>~$ /opt/PostgreSQL/15.2/bin/initdb -D /DATA/postgres/15.2/testdb</strong></p>
</div></blockquote>
</li>
<li><p><strong>Success. You can now start the database server using:</strong></p>
<blockquote>
<div><p><strong>/opt/PostgreSQL/15.2/bin/pg_ctl -D /DATA/postgres/15.2/test start</strong></p>
</div></blockquote>
<ul class="simple">
<li><p>PostgreSQL maintains all configuration parameters in the data directory like postgreSQL.conf,
pg_hba.conf and pg_ident.conf files.</p></li>
<li><p>By default, postgresql.conf exists under Data directory unless it’s specified in different path with -c
option used in pg_ctl option while starting the cluster.</p></li>
<li><p>postmaster.opts file contains the binary path of the PostgreSQL and data directory that is used for the
respective cluster.</p></li>
</ul>
</li>
</ul>
<p><strong>Starting and Stopping the Server (pg_ctl)</strong></p>
<p>1./opt/PostgreSQL/15.2/bin/pg_ctl -D /DATA/postgres/15.2/test start</p>
<p>2./opt/PostgreSQL/15.2/bin/pg_ctl -D /DATA/postgres/15.2/test stop</p>
<p>3./opt/PostgreSQL/15.2/bin/pg_ctl -D /DATA/postgres/15.2/test restart</p>
<p>4./opt/PostgreSQL/15.2/bin/pg_ctl -D /DATA/postgres/15.2/test status</p>
<blockquote>
<div><ul class="simple">
<li><p>when any changes performed in postgresql.conf the cluster can be reloaded
with REOAD option with out stopping /starting the server for most of the parameters.</p></li>
</ul>
</div></blockquote>
<p>5./opt/PostgreSQL/15.2/bin/pg_ctl -D /DATA/postgres/15.2/test reload</p>
<ul>
<li><p><strong>Systemctl services:</strong></p>
<blockquote>
<div><ul>
<li><p>Init scripts, used to start services, are stored in directories such as /lib/systemd/system or
/usr/lib/systemd/system. The init script itself can have any name, with the suffix .service. The
script contains a specific format of information that describes the service, how to start and stop
it, and the user and group under which it should run.</p></li>
<li><dl class="simple">
<dt>The systemctl utility that you will use to control your service accepts various commands the</dt><dd><p>ones you are most likely to use are as follows:</p>
</dd>
</dl>
<ul class="simple">
<li><p>systemctl start name.service</p></li>
<li><p>systemctl stop name.service</p></li>
<li><p>systemctl reload name.service</p></li>
<li><p>systemctl restart name.service</p></li>
<li><p>systemctl status name.service</p></li>
</ul>
</li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Location of systemctl file :-</strong></p>
<blockquote>
<div><p>sudo -i (It will log as root user )
cd /etc/systemd/system</p>
</div></blockquote>
</li>
<li><p><strong>To create new systemctl postgresql service file :-</strong></p>
<blockquote>
<div><ul>
<li><p>$ sudo nano postgresql.service</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>PostgreSQL<span class="w"> </span>database<span class="w"> </span>server
<span class="nv">After</span><span class="o">=</span>network.target<span class="w"> </span>postgresql.service<span class="w"> </span>DATA.mount
<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>forking
<span class="nv">User</span><span class="o">=</span>postgres
<span class="nv">Group</span><span class="o">=</span>postgres
<span class="nv">OOMScoreAdjust</span><span class="o">=</span>-1000
<span class="nv">Environment</span><span class="o">=</span><span class="nv">PG_OOM_ADJUST_FILE</span><span class="o">=</span>/proc/self/oom_score_adj
<span class="nv">Environment</span><span class="o">=</span><span class="nv">PG_OOM_ADJUST_VALUE</span><span class="o">=</span><span class="m">0</span>
<span class="nv">Environment</span><span class="o">=</span><span class="nv">PGSTARTTIMEOUT</span><span class="o">=</span><span class="m">270</span>
<span class="nv">Environment</span><span class="o">=</span><span class="nv">PGDATA</span><span class="o">=</span>/DATA/postgres/15.2/testdb
<span class="nv">ExecStart</span><span class="o">=</span>/opt/PostgreSQL/15.2/bin/pg_ctl<span class="w"> </span>-D<span class="w"> </span>/DATA/postgres/15.2/testdb<span class="w">  </span>start
<span class="nv">ExecStop</span><span class="o">=</span>/opt/PostgreSQL/15.2/bin/pg_ctl<span class="w">  </span>-D<span class="w"> </span>/DATA/postgres/15.2/testdb<span class="w"> </span>stop
<span class="nv">ExecReload</span><span class="o">=</span>/opt/PostgreSQL/15.2/bin/pg_ctl<span class="w"> </span>-D<span class="w"> </span>/DATA/postgres/15.2/testdb<span class="w"> </span>reload
<span class="nv">TimeoutSec</span><span class="o">=</span><span class="m">300</span>
<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>To start and stop server by Systemctl services</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>systemctl start daemon-reload</p></li>
<li><p>systemctl enable postgresql.service</p></li>
<li><p>systemctl start postgresql.service</p></li>
<li><p>systemctl stop postgresql.service</p></li>
<li><p>systemctl status postgresql.service</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="postgresql-monitoring-tools">
<span id="pgmonitor"></span><h2>PostgreSQL Monitoring Tools :<a class="headerlink" href="#postgresql-monitoring-tools" title="Link to this heading"></a></h2>
<ul>
<li><p>There are several open sources as well as Paid tools are available as front-end to PostgreSQL. Here are a few of them which are widely used :</p></li>
<li><p><strong>pgAgent:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>pgAgent is a job scheduler for PostgreSQL which may be managed using pgAdmin. Prior to pgAdmin v1.9, pgAgent shipped as part of pgAdmin. From pgAdmin v1.9 onwards, pgAgent is shipped as a separate application.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>pg_statsinfo:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Pg_statsinfo in the monitored DB on behalf of the existence of the form, pg_statsinfo regularly collected snaoshot information and stored in the warehouse</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>pgCluu:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>pgCluu is a PostgreSQL performances monitoring and auditing tool.</p></li>
<li><p>View reports of all statistics collected from your PostgreSQL databases cluster. pgCluu will show you the entire informations of the PostgreSQL Cluster and the system utilization</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>pgAdmin III:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>pgAdmin III is THE Open Source management tool for your PostgreSQL databases. Features full Unicode support, fast, multithreaded query and data editting tools and support for all PostgreSQL object types.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>psql:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>It is a command line tool and the primary tool to manage PostgreSQL. pgAdmin</p></li>
<li><p>It is a free and open source graphical user interface administration tool for PostgreSQL.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>phpPgAdmin:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>It is a web-based administration tool for PostgreSQL written in PHP. It is based on phpMyAdmin tool to manage MySQL.OpenOffice.org Base</p></li>
<li><p>It can be used as a front end tool to PostgreSQL.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>pgFouine:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>It is a log analyzer which creates reports from PostgreSQL log files. Proprietary tools</p></li>
<li><p>Lightning Admin for PostgreSQL, Borland Kylix, DBOne, DBTools Manager PgManager, Rekall, Data Architect, SyBase Power Designer, Microsoft Access, eRWin, DeZign for Databases, PGExplorer, Case Studio 2, pgEdit, RazorSQL, MicroOLAP Database Designer, Aqua Data Studio, Tuples, EMS Database Management Tools for PostgreSQL, Navicat, SQL Maestro Group products for PostgreSQL, Datanamic DataDiff for PostgreSQL, Datanamic SchemaDiff for PostgreSQL, DB MultiRun PostgreSQL Edition, SQLPro, SQL Image Viewer, SQL Data Sets etc.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>pgBackRest:</strong></p>
<ul>
<li><p>pgBackRest is a backup utility in postgresql , Following features are pgBackupRest</p>
<blockquote>
<div><ul class="simple">
<li><p>Parallel Backup &amp; Restore</p></li>
<li><p>Local or Remote Operation</p></li>
<li><p>Full, Incremental, &amp; Differential Backups</p></li>
<li><p>Backup Rotation &amp; Archive Expiration</p></li>
<li><p>Backup Integrity - Checksums are calculated for every file in the backup and rechecked during a restore.</p></li>
<li><p>Page Checksums - PostgreSQL has supported page-level checksums since 9.3.</p></li>
<li><p>Backup Resume - An aborted backup can be resumed from the point where it was stopped.</p></li>
<li><p>Streaming Compression &amp; Checksums - Compression and checksum calculations are performed in stream while files are being copied to the repository, whether the repository is located locally or remotely.</p></li>
<li><p>Delta Restore - The manifest contains checksums for every file in the backup so that during a restore it is possible to use these checksums to speed processing enormously.
Parallel, Asynchronous WAL Push &amp; Get</p></li>
<li><p>Tablespace &amp; Link Support - Tablespaces are fully supported and on restore tablespaces can be remapped to any location.</p></li>
<li><p>Amazon S3 Support</p></li>
<li><p>pgBackRest can encrypt the repository to secure backups wherever they are stored.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p><strong>pgbarman:</strong></p>
<ul class="simple">
<li><p>Open source backup and Restore Utility</p>
<ul>
<li><p>Barman relies on PostgreSQL’s extremely robust and reliable Point In Time Recovery technology</p></li>
<li><p>Barman allows you to remotely manage the backup and recovery phases of multiple servers from the same location</p></li>
<li><p>One of the coolest features of Barman is the backup catalogue, which allows you to list, keep, delete, archive and recover several full backups under the same hood</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>pganalyze:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>gwatch2 is a self-contained, easy to install and highly configurable PostgreSQL monitoring tool. It is dockerized, features a dashboard and can send alerts. No extensions or superuser privileges required!</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>pg_statsinfo &amp; pg_stats_reporter:</strong></p>
<ul class="simple">
<li><p>pg_statsinfo is a Postgres extension that collects lots of performance-relevant information inside the Postgres server which then can be aggregated by pg_stats_reporter instances which provide a web interface to the collected data. Both are FOSS software maintained by NTT.</p></li>
</ul>
</li>
<li><p><strong>PGObserver:</strong></p>
<ul class="simple">
<li><p>PGObserver is a Python &amp; Java-based Postgres monitoring solution developed by Zalando. It was developed with a focus on stored procedure performance but extended well beyond that.</p></li>
</ul>
</li>
<li><p><strong>pgCluu:</strong></p>
<ul class="simple">
<li><p>pgCluu is a Perl-based monitoring solution which uses psql and sar to collect information about Postgres servers and render comprehensive performance stats.</p></li>
</ul>
</li>
<li><p><strong>PoWA:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>PoWA is a PostgreSQL Workload Analyzer that gathers performance stats and provides real-time charts and graphs to help monitor and tune your PostgreSQL servers. It relies on extensions such as pg_stat_statements, pg_qualstats, pg_stat_kcache, pg_track_settings and HypoPG, and can help you optimize you database easily.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>OPM: Open PostgreSQL Monitoring:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Open PostgreSQL Monitoring (OPM) is a free software suite designed to help you manage your PostgreSQL servers. It’s a flexible tool that will follow the activity of each instance. It can gather stats, display dashboards and send warnings when something goes wrong. The long-term goal of the project is to provide similar features to those of Oracle Grid Control or SQL Server Management Studio.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>pgaudit:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>The PostgreSQL Audit Extension (or pgaudit) provides detailed session and/or object audit logging via the standard logging facility provided by PostgreSQL. The goal of PostgreSQL Audit to provide the tools needed to produce audit logs required to pass certain government, financial, or ISO certification audits.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>CyanAudit:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Cyan Audit is a PostgreSQL utility providing comprehensive and easily-searchable logs of DML (INSERT/UPDATE/DELETE) activity in your database.</p></li>
</ul>
<blockquote>
<div><p>With Cyan Audit you can:</p>
<blockquote>
<div><ul class="simple">
<li><p>Log any table with a PK, regardless of schema.</p></li>
<li><p>Search logs by querying a simple view.</p></li>
<li><p>Toggle logging on a column-by-column basis using an easy config table.</p></li>
<li><p>Attribute every operation to a specific application user.</p></li>
<li><p>Label any operation with a human-readable description.</p></li>
<li><p>Back up and restore logs with confidence using supplied Perl scripts.</p></li>
<li><p>Rotate &amp; drop old logs automatically using a supplied Perl script.</p></li>
<li><p>Keep years of logs online comfortably with automatic archival to your cheap tablespace.</p></li>
<li><p>Effectively “undo” any recorded transaction by playing its operations in reverse.</p></li>
<li><p>Save time with a design focused on ease of setup and maintenance.</p></li>
</ul>
</div></blockquote>
<p>Cyan Audit:</p>
<blockquote>
<div><ul class="simple">
<li><p>is written entirely in SQL and PL/pgSQL (except Perl cron scripts).</p></li>
<li><p>is Trigger-based.</p></li>
<li><p>supports PostgreSQL 9.6 and newer.</p></li>
<li><p>has been production tested since 2012.</p></li>
<li><p>For installation and usage instructions please see doc/cyanaudit.md.</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</li>
</ul>
</section>
<section id="data-types">
<span id="pgdata"></span><h2>Data Types:<a class="headerlink" href="#data-types" title="Link to this heading"></a></h2>
<ul>
<li><p><strong>PostgreSQL has a rich set of native data types available to users.Users can add new types to PostgreSQL using the CREATE TYPE command.</strong></p>
<blockquote>
<div><p><a class="reference external" href="https://www.postgresql.org/docs/9.6/static/datatype.html">https://www.postgresql.org/docs/9.6/static/datatype.html</a></p>
</div></blockquote>
</li>
</ul>
<section id="a-numeric-datatype">
<h3>a) Numeric datatype:<a class="headerlink" href="#a-numeric-datatype" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Numeric types consist of two-, four-, and eight-byte integers, four- and eight-byte floating-point numbers, and selectable-precision decimals.</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Storage Size</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Range</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BIGINT</p></td>
<td><p>8 bytes</p></td>
<td><p>large-range integer</p></td>
<td><dl class="simple">
<dt>-9223372036854775808 to</dt><dd><p>+9223372036854775807</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>DECIMAL</p></td>
<td><p>variable</p></td>
<td><p>user-speciﬁed precision, exact</p></td>
<td><dl class="simple">
<dt>up to 131072 digits before the decimal point; up</dt><dd><p>to 16383 digits after the decimal point</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>SMALLINT</p></td>
<td><p>2 bytes</p></td>
<td><p>small-range integer</p></td>
<td><p>-32768 to +32767</p></td>
</tr>
<tr class="row-odd"><td><p>INTEGER</p></td>
<td><p>4 bytes</p></td>
<td><p>typical choice for integer</p></td>
<td><p>-2147483648 to +2147483647</p></td>
</tr>
<tr class="row-even"><td><p>NUMERIC</p></td>
<td><p>variable</p></td>
<td><p>user-speciﬁed precision, exact</p></td>
<td><dl class="simple">
<dt>up to 131072 digits before the decimal point</dt><dd><p>to 16383 digits after the decimal point</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</section>
<section id="b-monetary-types">
<h3>b) Monetary Types:<a class="headerlink" href="#b-monetary-types" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>The money type stores a currency amount with a fixed fractional precision;</p></li>
<li><p>The fractional precision is determined by the database’s lc_monetary setting. The range shown in the table assumes there are two fractional digits. Input is accepted in a variety of formats, including integer and floating-point literals, as well as typical currency formatting, such as ‘$1,000.00’. Output is generally in the latter form but depends on the locale.</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Storage Size</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Range</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>money</p></td>
<td><p>8 bytes</p></td>
<td><p>currency amount</p></td>
<td><p>-92233720368547758.08 to +92233720368547758.07</p></td>
</tr>
</tbody>
</table>
</section>
<section id="c-character-types">
<h3>c) Character Types:<a class="headerlink" href="#c-character-types" title="Link to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The table below lists general-purpose character types available in PostgreSQL.</p></li>
</ul>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>character varying(n), varchar(n)</p></td>
<td><p>variable-length with limit</p></td>
</tr>
<tr class="row-odd"><td><p>character(n), char(n)</p></td>
<td><p>fixed-length, blank padded</p></td>
</tr>
<tr class="row-even"><td><p>text</p></td>
<td><p>variable unlimited length</p></td>
</tr>
</tbody>
</table>
</section>
<section id="d-binary-data-types">
<h3>d) Binary Data Types:<a class="headerlink" href="#d-binary-data-types" title="Link to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The bytea data type allows storage of binary strings</p></li>
</ul>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Storage Size</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>bytea</p></td>
<td><p>1 or 4 bytes plus the actual binary string</p></td>
<td><p>variable-length binary string</p></td>
</tr>
</tbody>
</table>
</section>
<section id="e-date-time-types">
<h3>e) Date/Time Types:<a class="headerlink" href="#e-date-time-types" title="Link to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>PostgreSQL supports the full set of SQL date and time types,</p></li>
<li><p>Dates are counted according to the Gregorian calendar, even in years before that calendar was introduced</p></li>
</ul>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Storage Size</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Low Value</p></th>
<th class="head"><p>High Value</p></th>
<th class="head"><p>Resolution</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>timestamp [ (p) ] [ without</p></td>
<td><p>8 bytes</p></td>
<td><p>both date and time (no time zone)</p></td>
<td><p>4713 BC</p></td>
<td><p>294276 AD</p></td>
<td><p>1 microsecond</p></td>
</tr>
<tr class="row-odd"><td><p>time zone ]</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>/ 14 digits</p></td>
</tr>
<tr class="row-even"><td><p>timestamp [ (p) ] with time</p></td>
<td><p>8 bytes</p></td>
<td><p>both date and time, with time zone</p></td>
<td><p>4713 BC</p></td>
<td><p>294276 AD</p></td>
<td><p>1 microsecond</p></td>
</tr>
<tr class="row-odd"><td><p>zone</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>/ 14 digits</p></td>
</tr>
<tr class="row-even"><td><p>date</p></td>
<td><p>4 bytes</p></td>
<td><p>date (no time of day)</p></td>
<td><p>4713 BC</p></td>
<td><p>5874897 AD</p></td>
<td><p>1 Day</p></td>
</tr>
<tr class="row-odd"><td><p>time [ (p) ] [ without time</p></td>
<td><p>8 bytes</p></td>
<td><p>time of day (no date)</p></td>
<td><p>00:00:00</p></td>
<td><p>24:00:00</p></td>
<td><p>1 microsecond</p></td>
</tr>
<tr class="row-even"><td><p>zone ]</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>/ 14 digits</p></td>
</tr>
<tr class="row-odd"><td><p>time [ (p) ] with time zone</p></td>
<td><p>12 bytes</p></td>
<td><p>times of day only, with time zone</p></td>
<td><p>00:00:00+1459</p></td>
<td><p>24:00:00-1459</p></td>
<td><p>1 microsecond
/ 14 digits</p></td>
</tr>
<tr class="row-even"><td><p>interval [ fields ] [ (p) ]</p></td>
<td><p>16 bytes</p></td>
<td><p>time interval</p></td>
<td><p>-178000000 years</p></td>
<td><p>178000000 years</p></td>
<td><p>1 microsecond
/ 14 digits</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="backup-and-recovery">
<h2>Backup and Recovery :<a class="headerlink" href="#backup-and-recovery" title="Link to this heading"></a></h2>
<ul class="simple" id="pgbackup">
<li><p>step to backup on postgresql database</p></li>
</ul>
<section id="logical-backup">
<h3>1) Logical backup:<a class="headerlink" href="#logical-backup" title="Link to this heading"></a></h3>
</section>
<section id="physical-backup">
<h3>2) Physical backup:<a class="headerlink" href="#physical-backup" title="Link to this heading"></a></h3>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="databases.html" class="btn btn-neutral float-left" title="DATABASES :" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mongodb.html" class="btn btn-neutral float-right" title="MongoDB Tutorial :" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Kiran.kambale.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>